buildPack: none
pipelineConfig:
  pipelines:
    pullRequest:
      pipeline:
        agent:
#          image: mellardc/potato:5.0
          image: gcr.io/kaniko-project/executor:debug-a310cc6d1cd449f95cedd23393de766fdc649651
        stages:
          - name: build
#            options:
#              volumes:
#                - name: dconf
#                  secret:
#                    secretName: jenkins-docker-cfg
#              containerOptions:
#                volumeMounts:
#                  - name: dconf
#                    mountPath: /kaniko/.docker
            steps:
              - name: build-and-push-image
#                command: /kaniko/executor
#                image: mellardc/potato:5.0
#                args: ['--dockerfile=Dockerfile','--destination=tfjxlegibledog.azurecr.io/potato', "--context=/workspace/source"]
                image: gcr.io/kaniko-project/executor:debug-a310cc6d1cd449f95cedd23393de766fdc649651
                command: /busybox/cat
                args: ['/tekton/home/.docker/config.json']
                env:
                  - name: DOCKER_CONFIG
                    value: /tekton/home/.docker
